{% extends "easyanalytics/base.html" %}
{% block content %}

    <!-- {% for post in posts %}
    <article class="media content-section">
        <div class="media-body">
          <div class="article-metadata">
            <a class="mr-2" href="#">{{ post.author }}</a>
            <small class="text-muted">{{ post.date_posted }}</small>
          </div>
          <h2><a class="article-title" href="#">{{ post.title }}</a></h2>
          <p class="article-content">{{ post.content }}</p>
        </div>
      </article>
    {% endfor %} -->

    <h1>Easy Analytics</h1>
    <p>Easy Analytics is a simple web application that allows you to track your website's visitors.</p>


    <div class="container">
      {% if error_msg %}
      <div class="alert alert-danger">{{ error_msg }}</div>
      {% endif %}
      <form method="POST" enctype="multipart/form-data">
          {% csrf_token %}
          <div class="form-group">
              <label for="file">Select file to upload:</label>
              <div class="custom-file">
                  <input type="file" class="custom-file-input" id="file" name="file">
                  <label class="custom-file-label" for="file"></label>
              </div>
          </div>
          <button type="submit" class="btn btn-primary mt-3">Submit</button>
      </form>

<!-- Adding in First 5 Rows -->
  <!-- {% if rows %}
    <h3>First 5 Rows of Uploaded Data:</h3>
    <table>
      <thead>
        <tr>
          {% for column in rows.columns %}
            <th>{{ column }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for _, row in rows.iterrows %}
          <tr>
            {% for _, value in row.iteritems %}
              <td>{{ value }}</td>
            {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %} -->
<!-- If plot then it shows it -->
      {% if plot_div %}
      <div class="mt-3">
          {{ plot_div|safe }}
          <button type="button" class="btn btn-danger mt-2" id="clear-plot-btn">Clear</button>
        </div>
        {% endif %}
      
    </div>
    
    {% block scripts %}
    <script>
    const clearPlotBtn = document.querySelector('#clear-plot-btn');
    const plotContainer = document.querySelector('#plot-container');

    clearPlotBtn.addEventListener('click', function () {
        plotContainer.remove();
    });
    </script>
    {% endblock %}

{% endblock content %}
